<IfModule mod_rewrite.c>
    # 1. Aktifkan Rewrite Engine
    RewriteEngine On
    
    # ====================================================
    # FORCE HTTPS REDIRECT (BARU DITAMBAHKAN)
    # ====================================================
    # Cek jika HTTPS mati (off)
    RewriteCond %{HTTPS} off
    # Redirect semua request ke https://...
    RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

    # ====================================================
    # KEAMANAN LARAVEL
    # ====================================================
    # Blokir akses langsung ke file/folder sensitif
    RewriteRule ^(\.env|composer\.json|composer\.lock|artisan|package\.json|phpunit\.xml|storage/logs/.*)$ - [F]

    # ====================================================
    # ROUTING KE FOLDER PUBLIC
    # ====================================================
    # Jika URL yang diminta BUKAN diawali dengan /public/ ...
    RewriteCond %{REQUEST_URI} !^/public/
    
    # ... maka arahkan (rewrite) ke folder public/
    RewriteRule ^(.*)$ public/$1 [L]
</IfModule>
